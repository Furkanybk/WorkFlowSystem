
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Worf Flow System</title>

    @Styles.Render("~/Content/layout/base/css")
    <link href="~/assets/vendors/jquery-steps/jquery.steps.css" rel="stylesheet" />
    <link rel="shortcut icon" href="~/assets/images/favicon.png" />
</head>
<body>
    <div class="main-wrapper">
        <div class="page-wrapper full-page">
            <div class="page-content d-flex align-items-center justify-content-center">
                <div class="row w-100 mx-0 auth-page" style="margin-top: 50px;">
                    <div class="col-md-12 col-xl-8 mx-auto">
                        <div class="card" style="border-radius:20px;">
                            <div class="row">
                                <div class="col-md-4 pr-md-0">
                                    <div class="auth-left-wrapper" style="background-image:url('/Images/cmwpp.png')">

                                    </div>
                                </div>
                                <div class="col-md-8 pl-md-0">
                                    <div class="auth-form-wrapper px-4 py-5">
                                        <a href="#" class="noble-ui-logo d-block mb-2">Work Flow<span> System</span></a><br />
                                        <form id="personalId" class="forms-sample" method="post">
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Ad</label>
                                                        <input value="" id="Name" name="Name" type="text" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Soyad</label>
                                                        <input value="" id="Surname" name="Surname" type="text" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                            </div><!-- Row -->
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Doğum Tarihi</label>
                                                        <input value="" id="Birthday" name="Birthday" type="date" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Tel</label>
                                                        <input value="" id="Contact" name="Contact" type="tel" class="form-control" data-inputmask-alias="(999)-999-9999" required>
                                                    </div>
                                                </div><!-- Col -->
                                            </div><!-- Row -->
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">İl</label>
                                                        <input value="" id="City" name="City" type="text" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">İlçe</label>
                                                        <input value="" id="State" name="State" type="text" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                            </div><!-- Row -->
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Adres</label>
                                                        <textarea id="Address" name="Address" class="form-control" maxlength="100" rows="3" required></textarea>
                                                    </div>
                                                </div><!-- Col -->
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Resim</label>
                                                        <input id="image" name="image" type="file" class="form-control" placeholder="Resim">
                                                    </div>
                                                </div><!-- Col -->
                                            </div><!-- Row -->
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Email</label>
                                                        <input id="Email" name="Email" type="text" class="form-control" data-inputmask="'alias': 'email'" required>
                                                    </div>
                                                </div><!-- Col -->
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Password</label>
                                                        <input value="" id="Password" name="Password" type="password" class="form-control" required>
                                                    </div>
                                                </div><!-- Col -->
                                            </div><!-- Row -->
                                            <div class="form-group" id="s"></div>

                                            <div class="mt-3">
                                                <br />
                                                <div class="danger">
                                                    <br />
                                                    <p id="message" class="text-danger"></p>
                                                </div>
                                            </div>
                                        </form>
                                        <div class="col-md-12">
                                            <div class="col-md-10"><a href="@Url.Action("Login")" class="d-block mt-3 text-muted">Zaten hesabınız var mı ? Giriş yapın.</a></div>
                                            <div class="col-md-2">
                                                <button id="subBtn" type="button" onclick="validateForm()" class="btn btn-primary mr-2 mb-2 mb-md-0">Kayıt ol</button>
                                            </div>
                                        </div>
                                        <div class="col-md-12"><br /></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
    </div>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
    <script>
        $(function () {
            showSwal = function (type, message) {
                if (type === 'success') {
                    Swal.fire({
                        position: 'middle',
                        type: 'success',
                        title: "Başarılı",
                        html: message,
                        showConfirmButton: false,
                        timer: 3000
                    })
                }
                else if (type === 'error') {
                    Swal.fire({
                        position: 'middle',
                        type: 'error',
                        title: "Hata",
                        html: message,
                        showConfirmButton: false,
                        timer: 3000
                    })
                }
                else if (type === 'spinner') {
                    Swal.fire({
                        position: 'middle',
                        title: "<div class='spinner-border' role='status' style='width: 125px; height: 125px; color: lightblue;'><span class='sr-only'>Loading...</span></div>",
                        showConfirmButton: false,
                        timer: 5000
                    })
                }
            }
        }); 

        function validateForm() {
            var x = document.forms["personalId"]["Name"].value;
            var x2 = document.forms["personalId"]["Surname"].value;
            var x3 = document.forms["personalId"]["City"].value;
            var x4 = document.forms["personalId"]["State"].value;
            var x5 = document.forms["personalId"]["Birthday"].value;
            var x6 = document.forms["personalId"]["Contact"].value;
            var x7 = document.forms["personalId"]["Email"].value;
            var x8 = document.forms["personalId"]["Password"].value;
            var x9 = document.forms["personalId"]["Address"].value;
            if (x == "" || x2 == "" || x3 == "" || x4 == "" || x5 == "" || x6 == "" || x7 == "" || x8 == "" || x9 == "") {
                showSwal("error", "Lütfen bilgileri eksiksiz giriniz.");
                return false;
            }
            else {
                personalPost();
            }
        }

        function personalPost() {
            var form = $('#personalId')[0];
            var formData = new FormData(form);
            $.ajax({
                url: "@Url.Action("personalRegister", "User")",
                type: "POST",
                processData: false,
                contentType: false,
                data: formData,
                success: function (data) {
                    if (data.redirect == "Login" && data.result == true) {
                        showSwal("success", data.message);
                        window.location.href = "@Url.Action("Login", "User")"; 
                    }
                    else if (data.redirect == "Password" && data.result == false) {
                        showSwal("error", data.message);
                    }
                    else if (data.result == false) {
                        showSwal("error", data.message);
                    }
                }
            });
        }
         
         $(function () {
            $("#Password").keyup(function () {
                 $.ajax({
                    url: " @Url.Action("passwprd", "User")",
                    type: "post",
                    data: { pasword: document.getElementById("Password").value },
                    success: function (data) {
                            if (data.data > 80) {
                                document.getElementById("s").innerHTML = "<div class='progress' ><div class='progress-bar progress-bar-success' role = 'progressbar' aria - valuenow='40' aria - valuemin='0' aria - valuemax='100' style = 'width:100%' > " + data.message + "</div > </div>";
                            }
                            else if (data.data >= 60) {
                                document.getElementById("s").innerHTML = "<div class='progress' ><div class='progress-bar progress-bar-warning' role = 'progressbar' aria - valuenow='40' aria - valuemin='0' aria - valuemax='100' style = 'width:" + data.data + "%' > " + data.message + "</div > </div>";
                            }
                            else if (data.data < 60)
                            {
                                document.getElementById("s").innerHTML = "<div class='progress' ><div class='progress-bar progress-bar-danger' role = 'progressbar' aria - valuenow='40' aria - valuemin='0' aria - valuemax='100' style = 'width:" + data.data + "%' > " + data.message + "</div > </div>";
                            }
                    }
                });
            });
         }); 

    </script>

    @Scripts.Render("~/Content/register/jquery")

</body>
</html>